<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Floating-Point Precision & Mantissa</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        h2 {
            color: #764ba2;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            color: #667eea;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .concept-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .key-insight {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .comparison-table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table tbody tr:hover {
            background-color: #f5f5f5;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-output {
            color: #ce9178;
        }
        
        .bit-diagram {
            display: flex;
            margin: 20px 0;
            border: 2px solid #667eea;
            border-radius: 8px;
            overflow: hidden;
            font-family: monospace;
        }
        
        .bit-section {
            padding: 15px;
            text-align: center;
            border-right: 2px solid #667eea;
        }
        
        .bit-section:last-child {
            border-right: none;
        }
        
        .bit-section.sign {
            background: #ff6b6b;
            color: white;
            flex: 0 0 60px;
        }
        
        .bit-section.exponent {
            background: #4ecdc4;
            color: white;
            flex: 0 0 120px;
        }
        
        .bit-section.mantissa {
            background: #95e1d3;
            flex: 1;
        }
        
        .visual-scale {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin: 30px 0;
            height: 300px;
        }
        
        .scale-bar {
            flex: 1;
            background: linear-gradient(to top, #667eea, #764ba2);
            margin: 0 10px;
            border-radius: 8px 8px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            color: white;
            font-weight: bold;
            padding: 10px;
            position: relative;
        }
        
        .scale-label {
            position: absolute;
            bottom: -30px;
            font-size: 0.9em;
            color: #333;
            text-align: center;
            width: 100%;
        }
        
        .example-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .emoji {
            font-size: 1.3em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¢ Understanding Floating-Point Numbers</h1>
        <p class="subtitle">A Visual Guide to Precision, Range, and the Mantissa</p>
        
        <div class="concept-box">
            <h3>üéØ The Big Picture</h3>
            <p>Think of floating-point numbers like scientific notation on a calculator. When you write <strong>1.23 √ó 10‚Åµ</strong>, you have two parts:</p>
            <p style="margin-top: 10px;"><strong>1.23</strong> (the significant digits) tells you <em>what numbers</em> you have</p>
            <p><strong>10‚Åµ</strong> (the exponent) tells you <em>how big</em> the number is</p>
            <p style="margin-top: 15px;">Computers do the same thing, but in binary (base-2) instead of decimal (base-10). The <span class="highlight">mantissa</span> is the part that stores your significant digits.</p>
        </div>

        <h2>üìä Quick Comparison: The Three Types</h2>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Memory</th>
                    <th>Precision</th>
                    <th>Range</th>
                    <th>Best For</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>float</strong></td>
                    <td>4 bytes</td>
                    <td>~7 digits</td>
                    <td>¬±3.4 √ó 10¬≥‚Å∏</td>
                    <td>Graphics, games (when memory matters)</td>
                </tr>
                <tr>
                    <td><strong>double</strong></td>
                    <td>8 bytes</td>
                    <td>~16 digits</td>
                    <td>¬±1.8 √ó 10¬≥‚Å∞‚Å∏</td>
                    <td>Science, engineering (when range matters)</td>
                </tr>
                <tr>
                    <td><strong>decimal</strong></td>
                    <td>16 bytes</td>
                    <td>28-29 digits</td>
                    <td>¬±7.9 √ó 10¬≤‚Å∏</td>
                    <td>Money, finance (when exactness matters)</td>
                </tr>
            </tbody>
        </table>

        <h2>üß© How Floating-Point Numbers Are Stored</h2>
        
        <p>Every float or double is stored in three parts, just like breaking down scientific notation:</p>
        
        <h3>Float Structure (32 bits total)</h3>
        <div class="bit-diagram">
            <div class="bit-section sign">
                <div><strong>S</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">1 bit</div>
                <div style="font-size: 0.8em;">Sign</div>
            </div>
            <div class="bit-section exponent">
                <div><strong>EEEEEEEE</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">8 bits</div>
                <div style="font-size: 0.8em;">Exponent</div>
            </div>
            <div class="bit-section mantissa">
                <div><strong>MMMMMMMMMMMMMMMMMMMMMMM</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">23 bits</div>
                <div style="font-size: 0.8em;">Mantissa (Precision)</div>
            </div>
        </div>
        
        <h3>Double Structure (64 bits total)</h3>
        <div class="bit-diagram">
            <div class="bit-section sign">
                <div><strong>S</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">1 bit</div>
                <div style="font-size: 0.8em;">Sign</div>
            </div>
            <div class="bit-section exponent">
                <div><strong>EEEEEEEEEEE</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">11 bits</div>
                <div style="font-size: 0.8em;">Exponent</div>
            </div>
            <div class="bit-section mantissa">
                <div><strong>MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM</strong></div>
                <div style="font-size: 0.8em; margin-top: 5px;">52 bits</div>
                <div style="font-size: 0.8em;">Mantissa (Precision)</div>
            </div>
        </div>

        <div class="key-insight">
            <h3><span class="emoji">üí°</span> Key Insight: What Each Part Does</h3>
            <p><strong>Sign bit:</strong> Determines if the number is positive or negative (like the ¬± in math)</p>
            <p><strong>Exponent:</strong> Determines the scale or magnitude (like "√ó 10‚Åµ" in scientific notation) - this gives you RANGE</p>
            <p><strong>Mantissa:</strong> Stores the actual significant digits (like "1.23" in scientific notation) - this gives you PRECISION</p>
        </div>

        <h2>üéØ Understanding Precision vs Range</h2>
        
        <div class="example-section">
            <h3>Range = How Big or Small</h3>
            <p>Range is about the size of numbers you can represent. Double wins here because it has more exponent bits.</p>
            
            <div class="code-block">
<span class="code-comment">// Double can store HUGE numbers</span>
double huge = 1.8E308;  <span class="code-comment">// Works fine!</span>

<span class="code-comment">// Float cannot</span>
float tooBig = 1.8E308f;  <span class="code-comment">// Error! Exceeds float's range</span>

<span class="code-comment">// Decimal has smallest range</span>
decimal small = 1.8E308m;  <span class="code-comment">// Error! Way beyond decimal's range</span>
            </div>
        </div>
        
        <div class="example-section">
            <h3>Precision = How Many Accurate Digits</h3>
            <p>Precision is about how many significant digits you can trust. The mantissa determines this. Decimal wins here.</p>
            
            <div class="code-block">
<span class="code-comment">// Let's store a number with many digits</span>
float f = 1.23456789012345f;
double d = 1.23456789012345;
decimal m = 1.23456789012345m;

Console.WriteLine(f);
<span class="code-output">// Output: 1.234568  (only ~7 digits accurate)</span>

Console.WriteLine(d);
<span class="code-output">// Output: 1.2345678901234567  (~16 digits accurate)</span>

Console.WriteLine(m);
<span class="code-output">// Output: 1.23456789012345  (all digits preserved!)</span>
            </div>
        </div>

        <h2>üî¨ What is the Mantissa?</h2>
        
        <div class="concept-box">
            <p>The mantissa is the part that holds your <strong>significant digits</strong>. Think of it as the "detail bucket" of your number. The more bits in the mantissa, the more decimal digits you can accurately represent.</p>
            
            <p style="margin-top: 15px;">Here's the clever trick computers use: they assume there's always a "1." at the beginning (called normalization), so they don't waste a bit storing it. They only store what comes after the decimal point.</p>
            
            <p style="margin-top: 15px;">For example, the number <strong>5.75</strong> in binary is <strong>101.11</strong>. In normalized form, that's <strong>1.0111 √ó 2¬≤</strong>. The computer stores only the <strong>0111</strong> part in the mantissa because the "1." is implied.</p>
        </div>

        <h3>Step-by-Step: Storing 5.75 as a Float</h3>
        
        <div class="example-section">
            <p><strong>Step 1:</strong> Convert 5.75 to binary</p>
            <div class="code-block">5.75 (decimal) = 101.11 (binary)
5 = 101
0.75 = 0.11 (0.5 + 0.25)</div>

            <p><strong>Step 2:</strong> Normalize it (scientific notation in binary)</p>
            <div class="code-block">101.11 = 1.0111 √ó 2¬≤
         ‚Üë ‚Üë‚Üë‚Üë‚Üë
         ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ This goes in mantissa
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Implied "1", not stored</div>

            <p><strong>Step 3:</strong> Store the parts</p>
            <div class="code-block">Sign:     0 (positive)
Exponent: 2 + 127 = 129 = 10000001
Mantissa: 01110000000000000000000
          ‚Üë‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
          23 bits total</div>
        </div>

        <h2>‚ö†Ô∏è Why This Causes Problems</h2>
        
        <div class="warning-box">
            <h3><span class="emoji">‚ùå</span> Problem #1: Some Decimals Can't Be Stored Exactly</h3>
            <p>Just like 1/3 = 0.333... goes on forever in decimal, many decimal numbers go on forever in binary. Since the mantissa has limited bits, these get truncated.</p>
            
            <div class="code-block">
<span class="code-comment">// 0.1 in binary is 0.0001100110011... (repeating forever!)</span>
float f = 0.1f;
Console.WriteLine($"{f:F20}");
<span class="code-output">// Output: 0.10000000149011611938</span>
<span class="code-comment">//         Not exactly 0.1!</span>

<span class="code-comment">// This is why we get:</span>
float result = 0.1f + 0.2f;
Console.WriteLine(result == 0.3f);
<span class="code-output">// Output: False  ‚ùå</span>
            </div>
        </div>

        <div class="warning-box">
            <h3><span class="emoji">‚ùå</span> Problem #2: Large Numbers Lose Small Details</h3>
            <p>The mantissa has a fixed number of bits. When you scale up to large numbers, the "gaps" between representable numbers get bigger.</p>
            
            <div class="code-block">
<span class="code-comment">// Small numbers: very precise</span>
float small = 1.0f;
Console.WriteLine(small + 0.0000001f);
<span class="code-output">// Output: 1.0000001  ‚úÖ Works</span>

<span class="code-comment">// Large numbers: precision lost</span>
float large = 16777216f;  <span class="code-comment">// 2^24</span>
Console.WriteLine(large + 1f);
<span class="code-output">// Output: 16777216  ‚ùå Lost the +1!</span>
            </div>
        </div>

        <div class="warning-box">
            <h3><span class="emoji">‚ùå</span> Problem #3: Errors Accumulate</h3>
            <p>When you do many operations, small rounding errors add up.</p>
            
            <div class="code-block">
<span class="code-comment">// Adding 0.1 one million times</span>
float sum = 0f;
for (int i = 0; i < 1000000; i++) {
    sum += 0.1f;
}
Console.WriteLine($"Expected: 100000, Got: {sum}");
<span class="code-output">// Output: Expected: 100000, Got: 100004.82  ‚ùå Big error!</span>
            </div>
        </div>

        <h2>‚úÖ Why Decimal is Different (and Better for Money)</h2>
        
        <div class="success-box">
            <h3><span class="emoji">üéâ</span> Decimal Uses Base-10, Not Binary!</h3>
            <p>Instead of trying to represent decimal numbers in binary (which causes the 0.1 problem), decimal stores numbers as a base-10 integer plus a scale factor. It's like storing "123" and "divide by 100" to get 1.23.</p>
            
            <div class="code-block">
<span class="code-comment">// Decimal stores 0.1 as:</span>
<span class="code-comment">// Integer: 1</span>
<span class="code-comment">// Scale: 1 (meaning divide by 10^1)</span>
<span class="code-comment">// Result: 1 / 10 = 0.1  ‚úÖ EXACT!</span>

decimal m = 0.1m;
Console.WriteLine($"{m:F20}");
<span class="code-output">// Output: 0.10000000000000000000  ‚úÖ Perfect!</span>

<span class="code-comment">// This is why financial calculations work:</span>
decimal result = 0.1m + 0.2m;
Console.WriteLine(result == 0.3m);
<span class="code-output">// Output: True  ‚úÖ</span>
            </div>
        </div>

        <h2>üéì When to Use Which Type</h2>
        
        <div class="example-section">
            <h3><span class="emoji">üí∞</span> Use DECIMAL for Money</h3>
            <div class="code-block">
decimal price = 19.99m;
decimal taxRate = 0.08m;
decimal total = price * (1 + taxRate);  <span class="code-comment">// Exact calculation</span>
<span class="code-output">// No rounding errors, perfect for financial transactions</span>
            </div>
        </div>

        <div class="example-section">
            <h3><span class="emoji">üî¨</span> Use DOUBLE for Science</h3>
            <div class="code-block">
double distance = 384400000;  <span class="code-comment">// meters to moon</span>
double time = distance / 299792458;  <span class="code-comment">// speed of light</span>
<span class="code-output">// Huge range, good precision, very fast</span>
            </div>
        </div>

        <div class="example-section">
            <h3><span class="emoji">üéÆ</span> Use FLOAT for Graphics/Games</h3>
            <div class="code-block">
float positionX = 125.5f;
float velocityY = -9.8f;
<span class="code-output">// Uses half the memory of double, fast enough precision</span>
            </div>
        </div>

        <h2>üéØ The Golden Rules</h2>
        
        <div class="key-insight">
            <p><strong>Rule 1:</strong> Never use float or double for money. Use decimal.</p>
            <p><strong>Rule 2:</strong> Never compare floats/doubles with == (use tolerance instead).</p>
            <p><strong>Rule 3:</strong> The mantissa determines how many digits you can trust.</p>
            <p><strong>Rule 4:</strong> More mantissa bits = more precision (but also more memory).</p>
            <p><strong>Rule 5:</strong> Decimal is exact for decimal fractions, but slower and has smaller range.</p>
        </div>

        <h2>üìù Final Summary</h2>
        
        <div class="concept-box">
            <p><strong>Mantissa</strong> = The "significant digits bucket" of a floating-point number</p>
            <p style="margin-top: 10px;"><strong>Float:</strong> 23-bit mantissa ‚Üí ~7 decimal digits of precision</p>
            <p><strong>Double:</strong> 52-bit mantissa ‚Üí ~16 decimal digits of precision</p>
            <p><strong>Decimal:</strong> 96-bit integer ‚Üí 28-29 decimal digits (different system, base-10)</p>
            
            <p style="margin-top: 20px; font-size: 1.1em; font-weight: bold;">The mantissa is why you can't store 0.1 exactly in binary floating-point, why large numbers lose precision in small digits, and why you should use decimal for financial calculations!</p>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-radius: 10px;">
            <p style="font-size: 1.2em; color: #667eea; font-weight: bold;">Now you understand floating-point precision! üéâ</p>
            <p style="margin-top: 10px; color: #666;">Remember: Choose your type based on whether you need range (double), precision (decimal), or memory efficiency (float).</p>
        </div>
    </div>
</body>
</html>